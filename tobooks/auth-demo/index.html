<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç§é’¥è®¤è¯ç³»ç»Ÿ</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container">
        <h1>ç§é’¥è®¤è¯è®¿é—®ç³»ç»Ÿ</h1>
        
        <div id="auth-container">
            <div id="login-form">
                <h2>è¯·ä¸Šä¼ æ‚¨çš„ç§é’¥è¿›è¡Œèº«ä»½éªŒè¯</h2>
                <div class="key-input">
                    <label for="private-key-text">è¾“å…¥æ‚¨çš„ç§é’¥</label>
                    <textarea id="private-key-text" placeholder="è¯·ç²˜è´´æ‚¨çš„ç§é’¥å†…å®¹..." rows="8"></textarea>
                </div>
                <div class="message-input">
                    <label for="message">éªŒè¯æ¶ˆæ¯</label>
                    <input type="text" id="message" value="è¯·æ±‚è®¿é—®" placeholder="è¾“å…¥è¦ç­¾åçš„æ¶ˆæ¯">
                </div>
                <button id="authenticate-btn" disabled>éªŒè¯èº«ä»½</button>
                <div id="status-message"></div>
            </div>
        </div>
        
        <div id="protected-content" style="display: none;">
            <h2>ğŸ‰ è®¤è¯æˆåŠŸï¼</h2>
            <p>ğŸ‰ æ‚¨å·²è·å¾—æ°¸ä¹…è®¿é—®æƒé™ï¼æ­£åœ¨è·³è½¬åˆ°ç½‘é¡µçœ‹ä¹¦å¹³å°...</p>
            <div class="content-box">
                <h3>ğŸ“š å³å°†è¿›å…¥çœ‹ä¹¦å¹³å°</h3>
                <p>æ‚¨ç°åœ¨å¯ä»¥è®¿é—®å®Œæ•´çš„ç”µå­ä¹¦é˜…è¯»åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š</p>
                <ul style="text-align: left; margin-top: 10px;">
                    <li>âœ… ä¸Šä¼ å’Œé˜…è¯» EPUB æ–‡ä»¶</li>
                    <li>âœ… å…¨æ–‡æœç´¢åŠŸèƒ½</li>
                    <li>âœ… ä¹¦ç­¾å’Œç¬”è®°åŠŸèƒ½</li>
                    <li>âœ… å¤šç§é˜…è¯»ä¸»é¢˜</li>
                    <li>âœ… æ— å¹¿å‘Šçº¯å‡€ä½“éªŒ</li>
                </ul>
                <div style="margin-top: 16px; text-align: center;">
                    <button id="get-tutorial-btn" class="get-key-btn" style="cursor: pointer;">
                        <span>ğŸ è”ç³»æˆ‘é¢†å–æ•™ç¨‹</span>
                        <div class="wechat-tooltip">
                            <img src="/public/wechat-qr.png" alt="å¾®ä¿¡äºŒç»´ç " />
                            <p>æ·»åŠ å¥½å‹ï¼Œå¤‡æ³¨â€œæ•™ç¨‹â€ï¼Œè‡ªåŠ¨å‘ä½ æ•™ç¨‹é“¾æ¥</p>
                        </div>
                    </button>
                </div>
            </div>
            <div style="text-align: center; margin-top: 20px;">
                <a href="/books" style="display: inline-block; padding: 12px 24px; background: #3498db; color: white; text-decoration: none; border-radius: 6px; font-weight: bold;">
                    ç«‹å³è¿›å…¥çœ‹ä¹¦å¹³å° â†’
                </a>
            </div>
        </div>
    </div>
    
    <script src="js/crypto-js.min.js"></script>
    <script src="js/jsrsasign-all-min.js"></script>
    <script src="js/auth-permanent.js"></script>
    <script>
        // é¢†å–æ•™ç¨‹æŒ‰é’®ç‚¹å‡»äº‹ä»¶ - å¤åˆ¶å¾®ä¿¡å·
        document.addEventListener('DOMContentLoaded', function(){
            var btn = document.getElementById('get-tutorial-btn');
            if (!btn) return;
            btn.addEventListener('click', function(){
                var wechatId = 'ymx94yyds';
                if (navigator.clipboard && navigator.clipboard.writeText) {
                    navigator.clipboard.writeText(wechatId).then(function(){
                        alert('å¾®ä¿¡å·å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼š' + wechatId);
                    }).catch(function(){
                        var ta = document.createElement('textarea');
                        ta.value = wechatId;
                        ta.style.position = 'fixed';
                        ta.style.opacity = '0';
                        document.body.appendChild(ta);
                        ta.focus();
                        ta.select();
                        try { document.execCommand('copy'); alert('å¾®ä¿¡å·å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼š' + wechatId); } catch(e){ alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨æ·»åŠ ï¼š' + wechatId); }
                        document.body.removeChild(ta);
                    });
                } else {
                    var ta = document.createElement('textarea');
                    ta.value = wechatId;
                    ta.style.position = 'fixed';
                    ta.style.opacity = '0';
                    document.body.appendChild(ta);
                    ta.focus();
                    ta.select();
                    try { document.execCommand('copy'); alert('å¾®ä¿¡å·å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼š' + wechatId); } catch(e){ alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨æ·»åŠ ï¼š' + wechatId); }
                    document.body.removeChild(ta);
                }
            });
        });
    </script>
</body>
</html>